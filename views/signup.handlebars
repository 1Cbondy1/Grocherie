<div class="ui middle aligned center aligned grid">
  <div class="column">
    <h2 class="ui teal image header">
      <div class="content">
        Create an account
      </div>
    </h2>
    <form class="ui large form">
      <div class="ui stacked segment">
        <div class="field">
          <div class="ui left icon input">
            <i class="envelope icon"></i>
            <input id="email" type="text" name="email" placeholder="E-mail address">
          </div>
        </div>
        <div class="field">
          <div class="ui left icon input">
            <i class="user icon"></i>
            <input id="name" type="text" name="name" placeholder="Nickname">
          </div>
        </div>
        <div class="field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input id="password" type="password" name="password" placeholder="Password">
          </div>
        </div>
        <div id="submitSignUpBtn" class="ui fluid large teal submit button">Sign up</div>
      </div>

      <div class="ui error message"></div>

    </form>
  </div>
</div>

<script type="text/javascript">
  $("#submitSignUpBtn").on("click", (event) => {
    let login = {
      userName: $("#email").val().trim(),
      nickName: $("#name").val().trim(),
      password: $("#password").val().trim()
    }
    signUpUser(login);
  });
  
  function signUpUser(login){
    $.post("/api/user/signup", login).then(function(data){
      window.location.replace(data);
      // If there's an error, handle it by throwing up a bootstrap alert
    }).catch(handleLoginErr);
  }
    function handleLoginErr(err) {
    $("#alert .msg").text(err.responseJSON);
    $("#alert").fadeIn(500);
  }
  
  
</script>
